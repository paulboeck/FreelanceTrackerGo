{{define "title"}}Client - {{.Client.Name}}{{end}}

{{define "main"}}
    <div class="client">
        <div class="metadata">
            <strong>{{.Client.Name}}</strong>
            <span>#{{.Client.ID}}</span>
        </div>
        <div>
            Client Details
        </div>
        <div class="client-actions">
            <a href="/client/update/{{.Client.ID}}" class="btn-client-action">Edit Client</a>
            <form method="POST" action="/client/delete/{{.Client.ID}}" onsubmit="return confirm('Are you sure you want to delete this client?');" class="delete-form">
                <button type="submit" class="btn-client-action btn-delete">Delete Client</button>
            </form>
        </div>
        <div class="metadata">
            <!-- Two ways of using template functions pipelining vs. not -->
            <time>{{.Client.Updated | humanDate | printf "Updated: %s"}}</time>
            <time>Created: {{humanDate .Client.Created}}</time>
        </div>
    </div>
    
    <div class="projects-section">
        <div class="projects-header">
            <h3>Projects</h3>
            <a href="/client/{{.Client.ID}}/project/create" class="btn-add-project" title="Add new project">
                ➕ Add Project
            </a>
        </div>
        
        {{if .Projects}}
            <div class="projects-list">
                {{range .Projects}}
                    <div class="project-item">
                        <div class="project-content">
                            <div class="project-info">
                                <strong class="project-name">{{.Name}}</strong>
                                <span class="project-id">#{{.ID}}</span>
                            </div>
                            <div class="action-buttons">
                                <a href="/project/update/{{.ID}}" class="btn-icon btn-edit" title="Edit project">
                                    ✏️
                                </a>
                                <form method="POST" action="/project/delete/{{.ID}}" onsubmit="return confirm('Are you sure you want to delete this project?');">
                                    <button type="submit" class="btn-icon btn-delete" title="Delete project">
                                        🗑️
                                    </button>
                                </form>
                            </div>
                        </div>
                        <div class="project-meta">
                            <time>{{.Updated | humanDate | printf "Updated: %s"}}</time>
                            <time>Created: {{humanDate .Created}}</time>
                        </div>
                    </div>
                {{end}}
            </div>
        {{else}}
            <div class="projects-empty">
                <p class="empty-message">No projects yet.</p>
                <p class="empty-action"><a href="/client/{{.Client.ID}}/project/create">Add the first project</a></p>
            </div>
        {{end}}
    </div>
{{end}}