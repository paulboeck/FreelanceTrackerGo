{{define "title"}}Project - {{.Project.Name}}{{end}}

{{define "main"}}
    <div style="margin-bottom: 1rem;">
        <a href="/client/view/{{.Client.ID}}" style="color: #3b82f6; text-decoration: none;">
            ‚Üê Back to {{.Client.Name}}
        </a>
    </div>

    <div class="client">
        <div class="metadata">
            <strong>{{.Project.Name}}</strong>
            <span>#{{.Project.ID}}</span>
        </div>
        <div>
            Project Details
        </div>
        <div class="client-actions">
            <a href="/project/update/{{.Project.ID}}" class="btn-client-action">Edit Project</a>
            <form method="POST" action="/project/delete/{{.Project.ID}}" class="delete-form">
                <button type="submit" class="btn-client-action btn-delete">Delete Project</button>
            </form>
        </div>
        <div class="metadata">
            <time>{{.Project.Updated | humanDate | printf "Updated: %s"}}</time>
            <time>Created: {{humanDate .Project.Created}}</time>
        </div>
    </div>
    
    <div class="projects-section">
        <div class="projects-header">
            <h3>Timesheets</h3>
            <a href="/project/{{.Project.ID}}/timesheet/create" class="btn-add-project" title="Add new timesheet">
                ‚ûï Add Timesheet
            </a>
        </div>
        
        {{if .Timesheets}}
            <div class="projects-list">
                {{range .Timesheets}}
                    <div class="project-item">
                        <div class="project-content">
                            <div class="project-info">
                                <strong class="project-name">{{.WorkDate.Format "2006-01-02"}}</strong>
                                <span class="project-id">{{printf "%.2f" .HoursWorked}} hours</span>
                            </div>
                            <div class="action-buttons">
                                <a href="/timesheet/update/{{.ID}}" class="btn-icon btn-edit" title="Edit timesheet">
                                    ‚úèÔ∏è
                                </a>
                                <form method="POST" action="/timesheet/delete/{{.ID}}">
                                    <button type="submit" class="btn-icon btn-delete" title="Delete timesheet">
                                        üóëÔ∏è
                                    </button>
                                </form>
                            </div>
                        </div>
                        {{if .Description}}
                        <div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #f3f4f6;">
                            <p style="color: #374151; font-size: 0.875rem; margin: 0;">{{.Description}}</p>
                        </div>
                        {{end}}
                        <div class="project-meta">
                            <time>{{.Updated | humanDate | printf "Updated: %s"}}</time>
                            <time>Created: {{humanDate .Created}}</time>
                        </div>
                    </div>
                {{end}}
            </div>
        {{else}}
            <div class="projects-empty">
                <p class="empty-message">No timesheets yet.</p>
                <p class="empty-action"><a href="/project/{{.Project.ID}}/timesheet/create">Add the first timesheet</a></p>
            </div>
        {{end}}
    </div>
    
    <div class="projects-section">
        <div class="projects-header">
            <h3>Invoices</h3>
            <a href="/project/{{.Project.ID}}/invoice/create" class="btn-add-project" title="Add new invoice">
                ‚ûï Add Invoice
            </a>
        </div>
        
        {{if .Invoices}}
            <div class="projects-list">
                {{range .Invoices}}
                    <div class="project-item">
                        <div class="project-content">
                            <div class="project-info">
                                <strong class="project-name">${{printf "%.2f" .AmountDue}}</strong>
                                <span class="project-id">{{.InvoiceDate.Format "2006-01-02"}}</span>
                            </div>
                            <div class="action-buttons">
                                <a href="/invoice/update/{{.ID}}" class="btn-icon btn-edit" title="Edit invoice">
                                    ‚úèÔ∏è
                                </a>
                                <form method="POST" action="/invoice/delete/{{.ID}}">
                                    <button type="submit" class="btn-icon btn-delete" title="Delete invoice">
                                        üóëÔ∏è
                                    </button>
                                </form>
                            </div>
                        </div>
                        <div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #f3f4f6;">
                            <p style="color: #374151; font-size: 0.875rem; margin: 0;">
                                Payment Terms: {{.PaymentTerms}}
                                {{if .DatePaid}}
                                    | <span style="color: #059669; font-weight: 500;">Paid: {{.DatePaid.Format "2006-01-02"}}</span>
                                {{else}}
                                    | <span style="color: #dc2626; font-weight: 500;">Unpaid</span>
                                {{end}}
                            </p>
                        </div>
                        <div class="project-meta">
                            <time>{{.Updated | humanDate | printf "Updated: %s"}}</time>
                            <time>Created: {{humanDate .Created}}</time>
                        </div>
                    </div>
                {{end}}
            </div>
        {{else}}
            <div class="projects-empty">
                <p class="empty-message">No invoices yet.</p>
                <p class="empty-action"><a href="/project/{{.Project.ID}}/invoice/create">Add the first invoice</a></p>
            </div>
        {{end}}
    </div>
{{end}}